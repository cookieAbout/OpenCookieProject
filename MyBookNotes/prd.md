Product Requirement Document: Telegram-бот для сохранения цитат из книг
# 1. Общая информация
### 1.1 Обзор продукта
Telegram-бот для сохранения цитат, тезисов и мыслей при прочтении книг. Бот позволяет пользователям организовывать свои заметки по книгам и легко получать к ним доступ позже.
### 1.2 Цель продукта
Создать удобный инструмент для сохранения и организации цитат и мыслей о прочитанных книгах в структурированном виде.
### 1.3 Целевая аудитория

Любители чтения
Студенты и исследователи
Писатели и блогеры, собирающие материал
Читатели, которые хотят сохранить интересные мысли и цитаты

# 2. Функциональные требования
## 2.1 Основные функции
### 2.1.1 Управление книгами

Добавление книги: Пользователь может добавить новую книгу, указав её название и опционально автора
Удаление книги: Пользователь может удалить книгу и все связанные с ней записи
Отображение списка книг: Пользователь может посмотреть список всех добавленных книг
Просмотр информации о книге: Пользователь может посмотреть информацию о конкретной книге и все сохраненные цитаты/мысли

### 2.1.2 Управление цитатами/тезисами

Добавление цитаты: Пользователь может добавить цитату/тезис/мысль к конкретной книге
Удаление цитаты: Пользователь может удалить определенную цитату
Просмотр цитат: Пользователь может просмотреть все цитаты, связанные с конкретной книгой

### 2.2 Пользовательский интерфейс
Взаимодействие с пользователем происходит через Telegram с использованием:

Кнопок и клавиатур для навигации
Текстовых команд
Инлайн-меню

### 2.3 Команды бота

    /start - начало работы с ботом, приветствие, краткая инструкция
    /help - отображение списка доступных команд и инструкций
    /add_book - добавление новой книги
    /list_books - отображение списка всех книг
    /book_info - просмотр информации о конкретной книге и связанных цитат
    /add_quote - добавление цитаты к книге
    /delete_book - удаление книги
    /delete_quote - удаление цитаты

# 3. Технические требования
### 3.1 Стек технологий

Язык программирования: Python 3.12
База данных: SQLite
ORM: SQLAlchemy
Фреймворк для Telegram API: aiogram
Управление конфигурацией: pydantic-settings (для работы с .env)
Контейнеризация: Docker

### 3.2 Архитектура приложения
Приложение будет построено по модульному принципу:

Модуль бота: Обработка команд и взаимодействие с пользователем
Модуль базы данных: Взаимодействие с БД, модели данных
Модуль конфигурации: Загрузка настроек из .env файла

### 3.3 Структура базы данных
Таблица Books

    id (Primary Key)
    title (название книги)
    author (автор, опционально)
    created_at (дата создания)

Таблица Quotes

    id (Primary Key)
    book_id (Foreign Key к Books)
    text (текст цитаты/мысли)
    created_at (дата создания)

### 3.4 Конфигурация Docker

Использование официального образа Python 3.12
Монтирование тома для данных SQLite
Настройка переменных окружения через .env файл

# 4. Сценарии использования
### 4.1 Добавление новой книги

Пользователь отправляет команду /add_book
Бот запрашивает название книги
Пользователь отправляет название
Бот опционально запрашивает автора
Пользователь отправляет имя автора или пропускает этот шаг
Бот сохраняет информацию в БД и подтверждает создание

### 4.2 Добавление цитаты к книге

Пользователь отправляет команду /add_quote
Бот отображает список доступных книг
Пользователь выбирает книгу
Бот запрашивает текст цитаты
Пользователь отправляет текст
Бот сохраняет цитату в БД и подтверждает создание

### 4.3 Просмотр информации о книге

Пользователь отправляет команду /book_info
Бот отображает список доступных книг
Пользователь выбирает книгу
Бот отображает информацию о книге и все сохраненные цитаты

### 4.4 Удаление книги

Пользователь отправляет команду /delete_book
Бот отображает список доступных книг
Пользователь выбирает книгу для удаления
Бот запрашивает подтверждение
Пользователь подтверждает
Бот удаляет книгу и все связанные цитаты из БД

# 5. Нефункциональные требования
### 5.1 Производительность

Время отклика бота не должно превышать 2 секунды
Система должна поддерживать до 1000 активных пользователей одновременно

### 5.2 Безопасность

Данные разных пользователей должны быть строго изолированы
Система должна быть защищена от SQL-инъекций
Хранение токена бота должно осуществляться через переменные окружения

### 5.3 Надежность

Система должна корректно обрабатывать ошибки пользователя
В случае сбоя, бот должен восстанавливать соединение автоматически
Регулярное резервное копирование базы данных

# 6. План реализации
### 6.1 Приоритеты разработки

Настройка проекта и базовой структуры
Реализация моделей базы данных
Разработка базовых команд бота
Реализация управления книгами
Реализация управления цитатами
Тестирование и отладка
Упаковка в Docker

### 6.2 Необходимые файлы проекта

    main.py - точка входа в приложение
    bot/ - модуль для работы с Telegram API
    database/ - модуль для работы с базой данных
    config.py - конфигурация приложения
    models.py - модели данных SQLAlchemy
    Dockerfile - инструкции для сборки Docker-образа
    requirements.txt - зависимости проекта
    .env.example - пример файла с переменными окружения
